\newpage

\begin{CJK*}{GBK}{song}

\setcounter{chapter}{0}
\setcounter{section}{0}

\chapter{在线广告综述}

\thispagestyle{empty}
\markboth{在线广告综述}{在线广告综述}

计算广告与网页搜索、推荐系统，都是互联网时代具有挑战性的大规模计算问题。由于数据规模的要求，这些系统都较广泛地采用检索(Retrieval)加排序(Ranking)这样类搜索的系统架构，因而有非常多的相似之处。于是，大家也往往会产生这样的观念：只要基本掌握基于搜索的技术框架，可以比较容易地搭建和运营好好一个广告系统。因此本书伊始，再展开产品和技术讨论之前，我们先来探讨一下与广告这项业务本身的内在规律，这些讨论对我们后面具体问题的建模和求解，有着非常有意义的指导作用。

熟悉在线广告市场的朋友都知道，这一领域的产品形态和业务逻辑相当复杂。为了对这些复杂的内容先有个宏观上的把握，我们从两个方面来探讨广告的内在规律，一是它的内涵，即这种商业活动的定义与目的；一是它的外延，即在线广告发展的简要历史和其中产生的关键产品形态。对其中的许多概念和观点，读者未必能够马上准确深入地行形成印象，然而随着后文内容的不断展开和发展，能够剥茧抽丝一般层层递进地加深理解，正是本书希望能够做到的。这部分还有另外一个目的，就是尽可能集中地对互联网广告的产品和技术术语做一介绍，以方便后面的讨论。

相比传统的线下广告，在线广告的具体形式由于互联网产品媒体形态、交互方式等方面非常大的差异性，也呈现出各种各样的表现形式。我们也将对其中比较常见的形式作简要介绍，也是希望读者能对在线广告的具体形式有直观的了解。同时，也希望大家能够与广告的根本目的相对照，把握这些多样的形式下在线广告产品的本质特点。

在了解了在线广告的概貌后，我们会对传统广告中发展起来的广告有效性理论做一些简要的回顾。通过把广告产生效果的过程分解为若干阶段，并讨论其中各阶段关键的影响因素，可以对在线广告情形下受众定向、创意优化及其他计算问题中有价值的技术点有概要性的把握。虽然这部分与具体的计算技术无关，却对计算广告中的一些根本原理有深入的揭示，希望读者有所重视。

本章的最后，还介绍了若干广告和在线广告领域中重要的行业协会。了解这些协会在广告业务中代表的利益方，以及他们对整个在线广告市场产品和技术形态的推动作用，对于有志从事广告技术和业务的读者来说也是必要的。

本章的内容与计算基本无关，其目的在于让读者在进入计算广告领域的一开始，就建立起以下重要的观念：首先，广告不同于搜索或推荐，它首先是一项商业活动，其次才是一项在互联网环境下需要技术优化的商业活动；其次，这一商业活动中广告主、媒体和用户的利益都需要被认真考虑和满足，才能达到整个市场的平衡和不断发展，在线广告市场所有产品和商业形式的演进，都是在这一主题下发生的。如果大家能在商业逻辑的框架下思考和探索计算广告技术，对理解和学习后文中的产品、架构和算法大有帮助。

\section{广告的定义与目的}

让我们先从了解广告的一般目的开始。什么是广告？对此我们可以参照William F. Arens在《当代广告学》\cite{Arens}中给出的定义：

\begin{CJK*}{GBK}{kai}广告是由已确定的出资人通过各种媒介进行的有关产品(商品、服务和观点)的，通常是有偿的、有组织的、综合的、劝服性的非人员的信息传播活动。\end{CJK*}

这一定义虽然看似冗长，却并无赘语。此处我们只解释两个关键点：首先，它指出了广告活动的两个主动参与方：出资人(sponsor) 和媒体(medium)。在数字广告复杂的市场结构中，我们可以用更一般性的术语来描述它们：\begin{CJK*}{GBK}{kai}需求方(Demand)\end{CJK*}和\begin{CJK*}{GBK}{kai}供给方(Supply)\end{CJK*}。 这里的需求方，可以是广告主(advertiser)，代表广告主利益的代理商(agency)或者其它技术形态的采买方；这里的供给方，可以是媒体，也可以是其他技术形态的变现平台。当然，广告还有一个被动的参与方，即受众(audience)。 请大家从现在开始，就牢牢建立起这样的概念：出资人、媒体和受众这三者的利益博奕关系是广告活动永远的主线，这一主线将贯穿于商业和产品形态的整个演化过程中。其次，该定义阐明了广告必须是有偿的、非人员的信息传播活动，这两点限制，前者使得广告的目标变得明确，后者使得这一目标可以采用计算的方式来优化，而这些都是计算广告产生的根本基础。

广告这一商业行为，其本质目的是什么呢？在不同的时代，广告主与媒体对这一问题存在着不同的认知。在传统媒体时代，供给方与需求方的在市场地位上有着相当的距离，不论你运营的是电视台、机场、或八卦杂志，都与大多数广告主需要的转化行为之间，有相当大的差距，这一阶段广告的目的，是希望借助媒体的力量来快速接触大量用户，以达到宣传品牌形象，提升中长期购买率与利润空间的目的。这种目的的广告，我们称为\begin{CJK*}{GBK}{kai}{品牌广告(Brand Awareness)}\end{CJK*}。当然，也有许多广告商希望能利用广告手段马上带来大量的购买行为，这种目的的广告，我们称为\begin{CJK*}{GBK}{kai}{效果广告(Direct Response)}\end{CJK*}。 传统广告市场缺乏大量投送和优化效果广告的能力。这是因为，对短期效果的追求要求广告精准地送达目标人群，而这在传统媒体上缺乏有效地技术手段。我能够想起的以效果为目的的传统广告，恐怕只有在写字楼下散发的快餐传单。而数字媒体的出现，使得效果广告空前蓬勃地发展起来，这主要有两方面的原因：一是数字媒体的特点可以让我们低成本地投送个性化广告；二是一些在线服务，比如搜索、电子商务，由于可以更清楚地了解用户的意图，也就使广告效果的优化更加容易。

既然有品牌和效果这两种目标，究竟如何描述广告这种商业活动的根本目的呢，我们仍然借用《当代广告学》中的见解：

\begin{CJK*}{GBK}{kai}广告的根本目的，是广告主通过媒体达到低成本的用户接触。\end{CJK*}

也就是说，按某种市场意图接触相应的人群，进而影响其中的潜在用户，使他们选择广告主产品的机率增加，或者对产品性价比的苛求程度降低，才是广告的根本目的。至于短期内的转化效果，由于市场意图或媒体性质的不同，并不是直接可比。换句话说，我们如果仅仅以效果为目的来思考问题，可能会在某种程度上远离广告的本质和正确方法。举个例子，某个感冒药广告商，如果以短期效果为导向，那么最佳的策略是把广告投放给那些现在感冒的人，不过这显然是一个荒谬的决策；再比如，某汽车广告商为了提升自己的品牌形象，希望对自己竞品品牌的用户加强宣传，而在这部分人群上，广告的直接效果甚至不如随机投放。希望大家认清这一概念，这样在遇到多种广告策略的效果比较时，避免一些偏颇的结论。广告的“低成本”，是与那些“人员”的信息传播活动相对比的，即相比于那些由市场或销售人员完成的劝服活动，广告搭媒体流量的便车理应更加经济有效。要确定是否真的成本较低，需要用到一个“\begin{CJK*}{GBK}{kai}{投入产出比(Return over Investment, ROI)}\end{CJK*}”的评价指标，即某次广告活动的总产出与总投入的比例。在实际中，广告活动的总投入容易确定，但总产出的确定却不那么容易，特别是在投放以中长期收益为目标的品牌广告时。因此，绝对的ROI有时难以计算，不过通过比较广告投入与人员性劝服活动的投入，我们仍然可以评估广告的成本是否令人满意。

\section{在线广告类型}

在线广告除了商业和产品有诸多形态，其与用户接触的形式也有多种多样的选择，并且随着互联网产品的发展变得越来越丰富。诸多在线广告的类型，在投送方式和用户交互方式两方面有不同的选择，下面我们对其中一些常见的和重要的类型做一简要介绍。

一、条幅广告(Banner Ad)：这是显示广告中中最传统，也是最典型的形式。这种广告一般是嵌入在页面中相对固定位置的图片，与内容一样需要占据固定的版面，因此，这种广告一般要有底层的备选广告素材，以防没有合适的广告匹配时页面上开天窗。目前，条幅广告大多数也都不再是静止的图片，二是由flash或其他技术方式实现的动态素材。下图给出了条幅广告的一个示例。
\begin{figure}\label{fig_banner}
\centering
\scalebox{0.65}
{
    \includegraphics[width=1.4\textwidth]{banner.eps}
}
\caption{条幅广告示例}
\end{figure}

二、文字链广告(Textual Ad)：这种广告的素材形式是一段链接到广告主落地页的文字，在搜索广告中为主流形式，同时在媒体广告中也被广泛采用。文字链广告有时像条幅广告那样占据固定的版面，有时也可以穿插在大量内容链接条目中。在后一种情形下，广告投放引擎可以灵活决定是否投出该文字链广告，以及投出的条目数，典型的例子仍然可以比如搜索广告，例如下图给出的示例。
\begin{figure}\label{fig_textual}
\centering
\scalebox{0.65}
{
    \includegraphics[width=1.0\textwidth]{textual.eps}
}
\caption{文字链广告示例}
\end{figure}

三、富媒体广告(Rich Media Ad)：这类广告往往是利用视觉冲击力较强的表现形式，在不占用固定版面位置的情况下，向用户侵入式地投送广告素材。富媒体广告常见的形式有弹窗、对联、全屏等。它比较适合在高质量的媒体做一些品牌性质比较强的广告投放，但是对用户的使用体验往往影响也较大。富媒体广告与条幅广告不同，没有防天窗的问题，在未售出的情况下可以静默。一些门户网站的首页有时会为某个品牌广告主提供专门定制的、交互形式很复杂的富媒体广告，这样的广告一般不采用受众定向的投送方式，也主要强调创意的冲击力和交互形式的特色。下图给出了一个富媒体广告中的弹窗广告示例。
\begin{figure}\label{fig_rich}
\centering
\scalebox{0.65}
{
    \includegraphics[width=1.0\textwidth]{rich.eps}
}
\caption{富媒体广告示例}
\end{figure}

四、视频广告(Video Ad)：随着在线视频的快速发展，在视频流播放的间隙插入的广告也成为互联网广告的一种重要形式。根据插入位置的不同，视频广告又可以分为前插片、后插片、暂停等品类。视频广告由于载体的独特性质，其效果和广告创意会比较比较与类似线下的电视广告。相应地，有关视频广告的效果评价，除了计算与条幅广告一样的点击率，还可以采用用户观看时长等更接近于用户印象的指标。
\begin{figure}\label{fig_video}
\centering
\scalebox{0.65}
{
    \includegraphics[width=1.5\textwidth]{video.eps}
}
\caption{视频广告示例：1. 前插片广告(左)；2. 暂停广告(右)}
\end{figure}

视频广告有两种最主要的形式：在视频内容播放之前的前插片广告，以及视频播放暂停时的广告。我们在上图中给出了这两种视频广告形式的示例。前插片广告一般采用短视频的形式，创意的冲击力和表现力要远远强于普通的显示广告，因此CPM价格往往也比较高；暂停广告则与普通的条幅广告区别不大。

五、社交广告(Social Ad)：社交网络的兴起给广告的传播渠道和能力都赋予了新的空间。在社交网络环境下嵌入的广告，可以通称为社交广告。社交广告中最典型的形式，是插入在社交网络信息流中的广告，这种方式最早见于Twitter，产品称为“Promoted Tweets”。这种方式力求在用户自然关注的交互过程中尽可能自然地插入广告，也被归于所谓“Native Ad”的范畴中。结合前一章介绍的广告有效性原理，其效果可以想见相当不错。个人认为，“社交广告”与“社交网络中的广告”是两个不同的概念，例如在社交网络页面上竞价售卖的文字链或条幅广告，其本质并不因为处于社交网络中有太大的变化。社交广告希望达到的效果，是通过用户的扩散式传播获得更大的影响力，以及更可信的口碑，从这个意义上讲，在信息流的交互中挖掘价值是一条前途光明的道路。关于社交广告的独特作用，以及产品和技术上的特点，我们会在第九章中专门讨论。

六、移动设备广告(Mobile Ad)：移动互联网在近几年得到了爆发式的增长，并且大有快速取代桌面互联网的趋势。严格来说，移动互联网上的广告形与桌面电脑上的广告没有本质的区别，不过由于一定设备上应用的大量普及，广告也由Web访问的页面上被搬进了应用里。于是，也产生了在应用中插入广告的SDK和相应的广告网络。关于移动广告的一些特点和发展趋势，我们会在第九章中再讨论。

七、邮件营销广告(Email Direct Marketing, EDM)：这是通过电子邮件的方式向目标用户传递价值信息的一种网络营销手段。与上面各种广告形式都不同，EDM是一种主动的广告形式，它不需要等到用户接触的机会产生时才被动地提供广告，而是可以随时向认为合适的用户发送推广信息。不过也正因为如此，EDM非常容易变成垃圾邮件的主要来源。因此，对EDM的运营者而言，精准地把握用户兴趣，非常有节制地提供对用户用价值的相关信息是非常关键的。比起显示广告，EDM中受众定向的利用更加直接，从某种意义上说也更为重要。下图给出了邮件营销广告的一些示例。
\begin{figure}\label{fig_edm}
\centering
\scalebox{0.65}
{
    \includegraphics[width=1.5\textwidth]{edm.eps}
}
\caption{邮件营销广告(EDM)示例}
\end{figure}

\section{互联网广告简史}

在开始讨论计算广告技术之前，我们有必要先从市场需求和产品形态的角度快速浏览一下在线广告发展的历程。这么做的动机，是因为广告市场的概念、技术和术语繁多，如果不是对这些有基本的了解，很难深入探讨并理解具体的产品或技术。

让我们回到上个世纪末，那时在线媒体，例如美国在线(American Online, AOL)、雅虎(Yahoo!)等网站，刚刚产生不久。他们已经取得了不错的流量规模，可是投资人当然希望这些媒体也能够给他们带来真金白银。要对这些线上流量进行变现，最直觉的方法，就是把网站的HTML页面当成是杂志的版面，在里面插入广告位，按照杂志的广告那样去售卖。供给方有了，那么需求方呢？线下广告的4A代理公司也就把这些网站当成一本本新的杂志，按原来的思路和逻辑进行采买。这种在互联网上展示条幅(banner)广告创意的产品形式，我们称为\begin{CJK*}{GBK}{kai}{显示广告(Display Advertising)}\end{CJK*}。这一阶段显示广告的售卖模式，我们称为\begin{CJK*}{GBK}{kai}{合约式广告(Agreement-based Advertising)}\end{CJK*}：即采用合同约定的方式确定某一广告位在某一时间段为某特定广告主所独占，并且根据双方的要求，确定广告创意的允许范围以及同一页面上的某种广告主排他策略。当然，在这样的采买模式下，还没有上任何对计算的需求，因为此时唯一需要技术支持人员帮忙的，就是把广告主的创意作为一个HTML的片段插入到媒体的页面中。然而，情况很快发生了变化。互联网媒体大多数是上市公司，为了使得营收的增长达到华尔街的预期，当然希望逐年甚至逐季提高自己的广告位报价。在流量快速增长，或者数字广告逐渐为广告主认知的阶段，这样的提价是比较容易被市场接受的。可是当尘埃落定，媒体的流量和品牌认知度都相对稳定以后，再想向广告主收取更多的费用就不那么容易了。这是否意味着这一市场将降低发展速度甚至趋近饱和呢？恰恰相反，精彩的故事才刚刚开始！

聪明的互联网广告运营者们经过探索，很快就发现了在线广告不同于传统媒体广告的本质特点：我们是可以对不同的受众呈现不同的广告创意的！在今天看来再平常不过的这个观念，在计算广告的整个历史上闪烁着最耀眼的光辉，也是在线广告的效果和市场规模不断发展的核心驱动力。认识到了这一点，媒体马上找到了一条能使得广告位报价继续提高的思路：可以把同一个广告位的男性受众和女性受众卖给不同的广告主，比如对男性受众展示某剃须刀品牌的广告，而对女性受众展示某化妆品品牌的广告。这样的广告投放方式，称为\begin{CJK*}{GBK}{kai}{定向广告(Targeted Advertising)}\end{CJK*}。很显然，这样的广告系统已经对计算技术产生了两个具体需求：一是\begin{CJK*}{GBK}{kai}{受众定向(Audience Targeting)}\end{CJK*}，即通过技术手段标定某个用户的性别、年龄或其他标签。二是\begin{CJK*}{GBK}{kai}{广告投放机(Ad Server)}\end{CJK*}，它将广告投送由直接嵌入页面变为实时响应前端请求，并根据用户标签自动决策和返回合适的广告创意。由于从传统的品牌广告市场直接延伸而来，此时的定向广告仍然以合约的方式进行：媒体向广告主保证某个投放量，并在此基础上确定合同的总金额以及量未完成情况下的赔偿方案。这种“\begin{CJK*}{GBK}{kai}{担保式投送(Guaranteed Delivery)”}\end{CJK*}的交易方式，逐渐成为互联网合约式广告的主要商业模式。一般来说，这样的广告合约仍然主要面向品牌广告主，并且按照\begin{CJK*}{GBK}{kai}{按千次展示付费(Cost Per Mille, CPM)}\end{CJK*}的计费方式。

合约广告系统中有一个重要的计算问题，即在满足各合约目标受众量要求的同时，尽可能为所有广告商分配到质更好的流量。这一问题有两个难点：一是如何有效地将流量分配到各个合约互相交叉的人群覆盖上；二是要在在线的环境下实时且经济地完成每一次展示决策。这个问题，我们称之为\begin{CJK*}{GBK}{kai}{在线分配(Online Allocation)}\end{CJK*}。如果将各合约的量看做约束条件，将某种意义下的质看做目标函数，我们可以利用带约束优化(Constrained Optimization)的数学框架来探索这一问题。为了得到在线环境下切实可行的解决方案，学术界和工业界的同仁进行了理论和工程方面大量的研究，有一些高效且简便的实用方案已经为各媒体广泛采用。

大多数广告系统的架构，就其在线部分而言，都非常像一个搜索引擎。具体地说，就是倒排检索加上排序这样的两阶段解决方案。广告的检索技术与搜索虽然有一定的差别，但基本框架非常类似。至于排序的准则，则与搜索有较大的区别：搜索排序以优化相关性为目标，但广告排序是以优化投入产出比为目标。

需要注意，显示广告领域定向投放的最初动机，是供给方为了拆分流量以获得更高的营收。如果一开始就提供非常精细的定向，反而会造成售卖率的下降，因此，最初的定向标签往往都设置在在较粗的粒度上，最典型的是一些人口属性标签。不过，开弓没有回头箭！受众定向显然更符合需求方的口味和利益。不要忘了，广告市场的钱是全部是来自需求方的，他们的的利益被满足得越好，市场的规模就会越大。因此，受众定向产生以后，市场向着精细化运作的方向快速发展，主要有两方面的发展趋势：一是定向标签变得越来越精准；二是广告主的数量不断膨胀。在这些趋势下，仍然按照合约的方式售卖广告会碰到越来越多的麻烦：首先，很难对这些细粒度标签组合的流量做准确预估；其次，当一次展示同时满足多个合约的时候，仅仅按照量约束下的在线分配策略进行决策，有可能浪费掉了很多本来可以卖得更贵的流量。既然量的约束带来了这么大的麻烦，有没有可能大胆一点，抛弃量的保证，而采用最唯利是图的策略来进行广告决策？这样的思路催生了计算广告历史上革命性的产品模式――\begin{CJK*}{GBK}{kai}{竞价广告(Auction-based Advertising)}\end{CJK*}。在这种模式下，供给方只向广告主保证质即单位流量的成本，但不再以合约的方式给出量的保证，换言之，对每一次展示，都基本按照收益最高的原则来决策。

上面是从显示广告规律看竞价产生的原因，实际历史的足迹却并非如此。竞价广告产生的最初场景，是在互联网广告最主要的金矿――\begin{CJK*}{GBK}{kai}{搜索广告(Search Ad)}\end{CJK*}中。在上个世纪末，以谷歌(Google)为代表的搜索引擎技术成熟以后，迅速成为互联网新的入口点。与门户网站不同，搜索引擎从一开始就没有被当做媒体来看待，因此搜索流量的变现，也采用了与服务自然结合的\begin{CJK*}{GBK}{kai}{付费搜索(Paid Search, Sponsored Search)}\end{CJK*}模式。从广告的视角来看，我们也可以把付费搜索看做一种定向广告，即根据用户的即时兴趣定向投送的广告，而即时兴趣的标签就是关键词。很显然，这种定向广告从一开始就直接达到了非常精准的程度，也就很自然地采用了竞价的方式售卖。

当搜索广告产生了巨大的收益以后，搜索引擎开始考虑将这样的变现方式推广到其他互联网媒体上：将用户的即时兴趣标签有搜索词换成正在浏览页面中提取的关键词，可以将这套竞价广告系统从搜索结果页照搬到媒体页面上，这就产生了\begin{CJK*}{GBK}{kai}{上下文广告(Contextual Advertising)}\end{CJK*}。上下文广告的初期，创意的形式也是与搜索广告一样的文字链接，这让许多产品讨论将它与显示广告分开对待。不过当我们把它与上一段中精细化定向的显示广告对比来看时，就知道这样的区分实际上毫无必要，或许从创意形式上把显示广告和\begin{CJK*}{GBK}{kai}{文字链广告(Textual Advertising)}\end{CJK*}区别开更符合分类的逻辑。

从宏观市场上看，竞价广告与合约广告有很大的不同。没有了合约的保证，大量的广告主处在一个多方博弈的环境中。与直觉不同的是，在如何收取广告主费用这一点上，我们并非按照微观上最优的方案实施，就可以达到整个市场最大的收益。
关于定价机制的深入研究，产生了\begin{CJK*}{GBK}{kai}{广义第二高价(Generalized Second Pricing)}\end{CJK*}这一竞价重要的理论。

基于竞价机制和精准人群定向这两个核心功能，在线广告分化出了\begin{CJK*}{GBK}{kai}{广告网络(Ad Network)}\end{CJK*}这种新的市场形态。它批量地运营媒体的广告位资源，按照人群或上下文标签售卖给需求方，在需求发生冲突时用竞价的方式决定流量分配。广告网络的结算，以\begin{CJK*}{GBK}{kai}{按点击付费(Cost per Click, CPC)}\end{CJK*}的方式为主，这一点有数据和业务方面多层次的原因，我们在后文会详细探讨。虽然我们不太能指这种方式的\begin{CJK*}{GBK}{kai}{千次展示收益(Revenue per Mille, RPM)}\end{CJK*}可以达到合约式品牌广告的水平，但它使得大量中小互联网媒体有了切实可行的变现手段：这些媒体有一定的流量，但还不值得建立自己的销售团队面向品牌广告商售卖，直接把自己的广告\begin{CJK*}{GBK}{kai}{库存(Inventory)}\end{CJK*}托管给广告网络，借助广告网络的销售和代理团队为自己的流量变现。当然，作为广告网络的一个特例，搜索广告的变现能力可是一枝独秀的。

我们说过，采买的量和质都是广告商永远存在的需求。广告网络既然只通过出价接口提供质的标准，那么由谁来保证量呢？自然会有需求方的某种产品来完成。当广告网络产生以后，4A代理公司当然也要对自己的广告采买方式做出调整，因为此时的流量采买发生了几点显著变化：一是更多地面向受众而非媒体或广告位进行采买，这当然是与受众定向的流行有直接关系；二是需求方的代理需要采用技术的手段保证广告主量的要求，并在此基础上帮助广告主优化效果。这又是一个受限优化，听起来很像前文提到的在线分配问题。但是实际上，这个问题有着本质的不同：由于只能在广告网络定义好的定向标签组合上预先指定出价，而不能控制每一次展示的出价，因此，市场看起来象一个黑盒子，需求方只能靠选择合适的标签组合，以及阶段性调整出价来间接控制效果。这种面向多个广告网络或媒体按人群一站式采买广告，并优化投入产出比的需求方产品，我们称为\begin{CJK*}{GBK}{kai}{自动交易终端(Automatic Trading Desk, ATD)}\end{CJK*}。

可以看出，在广告网络中，核心的竞价逻辑是封闭的。这种封闭的竞价机制，仍然不能完全满足需求方越来越明确的利益要求。试想下面的两个例子：一、某电子商务网站需要通过一次广告投放来向它的忠实用户推广某产品；二、某银行希望通过自己的信用卡用户在网络上找到类似的潜在用户群，并通过广告争取这批潜在用户。很显然，任何广告网络都不可能直接为这两个需求提供人群标签。与其想办法满足这些不断产生的定制化需求，不如干脆设计一种开放的竞价逻辑，让需求方按自己的人群定义来挑选流量！这样的目标催生了\begin{CJK*}{GBK}{kai}{实时竞价(Real Time Bidding)}\end{CJK*}技术。所谓实时竞价，就是把拍卖的过程由广告主预先出价，变成每次展示时实时出价。只要把广告展示的上下文页面url，以及访客的cookie等信息传给需求方，它就有充分的信息来完成定制化的人群选择和出价。需要注意的是，越是定制化的人群选择，往往就越精细，也就意味着单一媒体能达到的reach会相当有限。于是，市场上产生了大量聚合各媒体的剩余流量，采用实时竞价方式为他们变现的产品形态―― \begin{CJK*}{GBK}{kai}{广告交易平台(Ad Exchange)}\end{CJK*}。这个名称让我们很容易联想起股票交易所。事实上，如果我们把广告网络的交易方式想象成场外交易市场(Over-the-counter Market)，那么广告交易平台与股票交易所确实有着类似的作用。

通过实时竞价的方式，按照定制化的人群标签购买广告，这样与广告交易平台接口的产品，我们称为\begin{CJK*}{GBK}{kai}{需求方平台(Demand Side Platform, DSP)}\end{CJK*}。 由于实时竞价主要采用按展示次数计费的方式(原因后文会详细讨论)，DSP需要尽可能准确地估计每一次展示带来的期望价值。在这一点上，DSP比ATD要幸运得多了，因为充分的环境信息使得深入的计算和估计成为可能。基于DSP的广告采买，非常类似于股票市场上的程序交易，我们把这样的广告采买方式也叫做\begin{CJK*}{GBK}{kai}{程序购买(Programmatic Buy)}\end{CJK*}。 除了RTB以外，还有其他几种程序购买的交易方式，如优选(Preferred Match)以及前文提到的ATD 中的自动出价购买。可以预见，与金融市场一样，在线广告中程序购买的作用和地位将会不断加强，这是由数字广告的本质特点以及广告主利益最大化的趋势所决定的。

可能有的初次接触在线广告的读者，会对这部分中提到的大量概念和商业逻辑感到无所适从。不过没关系，上面所有用黑体字标出的关键概念，我们在后文某个地方都会有详细的讨论。而我们写这一段的目的，也仅仅是让大家对本书讨论的范畴有个全局性的认识，从而在后文中接触到某个具体问题时不会只见树木，不见森林。

\begin{figure}\label{fig_LUMA}
\centering
\scalebox{0.6}
{
    \includegraphics[width=1.65\textwidth]{LUMA.eps}
}
\caption{LUMA总结的显示广告市场结构和代表公司图谱}
\end{figure}

由于在线广告存在着较为复杂的市场结构，LUMA将北美市场的主要代表公司作了一次非常著名的总结，并绘制成了图\ref{fig_LUMA}中的“Display Landscape”图谱。这一图谱的骨架与上面我们介绍的在线广告简史，有着非常紧密的联系，因此也是本书在广告产品方面重要的提纲。基本上可以说，这一图谱是从两端向中间逐渐发展和形成的：首先是合约阶段，广告主通过代理公司(Agency)从媒体方采买广告，而媒体方的Ad Server则负责完成和优化各个广告主的合约；然后，市场进化出了竞价售卖方式，从而在靠近供给方产生了广告网络(Ad Network)这样的产品形态，而需求方的代理公司为了适应这一市场变化，孵化除了对应的广告采买平台(Media Buying Platform)；最后，当市场产生了实时竞价方式交易时，供给方进化出了广告交易平台(Ad Exchange)，而需求方则需要用需求方平台(DSP)与其对接来出价和投送广告。图中的下半部分，多是一些对这一骨干市场结构起支持作用的产品，或者在细分领域的特异化产品。我们在后面介绍到相关部分时，将会给出相应的介绍。

图\ref{fig_LUMA}中的个别术语，与本书中的惯例略有区别。比如“广告采买平台(Media Buying Platform)”，我们会在书中用相近似的产品概念“自助交易终端(ATD)”来代替；而途中的“Yield Optimizer”这一产品，我们在书中将采用后来被更广泛采用的名称“供应方平台(SSP)”，这一点请大家留意。

\section{广告有效性原理}

为了探讨用计算技术优化广告投放的效果，我们还要先看看广告从产生用户接触开始，是如何产生最终效果的。这一问题是传统广告领域一个重要的研究课题，我们直接借鉴了前人了研究成果，按照方便计算广告讨论的原则，用一个三段式信息传播模型来解剖广告由物理上产生到最终产生转化行为的全过程，这一模型如图\ref{fig_stage}所示。

\begin{figure}\label{fig_stage}
\centering
\scalebox{0.6}
{
    \includegraphics[width=1.65\textwidth]{stage.eps}
}
\caption{广告效果产生过程示意}
\end{figure}

根据上图，这以有效性模型把广告活动的整个信息接收过程分为三个大阶段：选择(Selection)、解释(Interpretation)与态度(Attitude)；或者进一步分解为六个小阶段：曝光、关注、理解、接受、保持与决策，其中每两个小阶段对应一个大阶段。下面我们分别来讨论每个阶段的意义和关键点。

一、曝光(Exposure)阶段：这一阶段指的是广告物理上展现出来的过程，此阶段的有效性往往与广告位的物理属性有关，并没有太多可以通过技术优化的空间。实际的广告实践中，曝光的有效性对最终结果的影响往往远远高于其他技术性因素，所以才会有传统广告中“位置为王”的说法。北京的读者们一定有直观感受，东三环北端**大厦外立面正对着整条东三环北路的广告牌有多么好的曝光效果。在互联网广告中，位置的影响有时会更加显著，因此如何从算法上消除由于由此带来的点击率预估偏差，是一个非常重要的实际问题。

二、关注(Attention)阶段：这一阶段指的是受众从物理上接触到广告到意识上注意到它的过程。对广告而言，这一过程并非那么简单。笔者曾经看到一位好友在浏览某社交网站，他的小儿子在旁边喊：“爸爸，快看网页上的恐龙！”这位朋友找了一分多钟，都没有找到恐龙，而实际上恐龙就在网页上端最醒目的广告位上。那么如何使得关注阶段的效率提高呢？我们介绍几个重要的原则：1. 尽量不要打断用户的任务。这一点是上下文相关的广告投送的原理基础，同时也能说明为什么文字链广告点击率普遍高于条幅广告。上面我举的例子，也可以用这个原则解释来解释，当用户明确辨识出某个固定不变的广告位，并且不再认为它与自己当浏览网页的任务有关联时，他会下意识地屏蔽其中的内容。2. 明确传达向用户推送此广告的原因，这一点是受众定向广告创意优化的重要方向。3. 内容符合用户的兴趣或需求，这是受众定向的原理基础。

三、理解(Comprehension)阶段：受众意识到了广告的存在，并不意味着他一定能够理解广告传达的信息。再举一个例子，笔者有一次试玩了一款网页游戏，然后被某游戏广告网络定向到，并多次看到某宣传“四维城战新模式”的游戏广告。应该说这样的定向是精准的，我也非常认真地关注了广告的内容，不过这些内容我确实不能直观理解，也就谈不上后续的转化。理解阶段有哪些原则呢？1. 广告内容要在用户能理解的具体兴趣范围内，这就说明了真正精准的受众定向有多么必要。2. 要注意设定与关注程度相匹配的理解门槛。比如在电视广告中，可以用有一定情节的短故事来宣传品牌；在路牌广告中，创意制作原则是将若干主要市场诉求都表达出来；而对于互联网广告，由于用户的关注程度非常低，我们应该集中强调一个主要诉求以吸引用户的注意力。

四、接受(Acceptance)阶段：受众理解了广告传达的信息，并不一定表示他认可这些信息。广告领域有一句名言：“我知道有一半的广告预算浪费了。”实际的情况还有可能更糟，如果表达的信息不适当，甚至有可能有三分之一的广告展示起到负面效果！在使用幽默、性感这样非常规的广告手段时，要特别注意这一点。广告的上下文环境对于广告的接受程度也有着很大的影响，同一个品牌广告出现在某游戏社区上和门户网站首页上，用户会倾向于认为后者更具说服力，这也就是优质媒体的品牌价值。在定向广告越来越普遍的今天，如何让合适的广告出现在合适的媒体上，即\begin{CJK*}{GBK}{kai}{广告安全(Ad Safety)}\end{CJK*}的问题，正在引起大家越来越多的关注。

五、保持(Retention)阶段：对于不仅仅追求短期转化的广告商，当然希望广告传达的信息给用户留下长久的记忆，以影响他长时间的选择。品牌广告商在创意设计上花了大量的精力提高此阶段效果，我们想想那些充满艺术性或浪漫气质的电视汽车广告，可以对此有直观的认识。

六、决策(Decision)阶段：成功广告的最终作用是带来用户的转化行为，虽然这一阶段已经离开了广告的业务范围，但好的广告还是能够为转化率的提高做好铺垫。特别是对于电商或团购业务，在创意上强调哪些信息以打动那些价格敏感的消费者，是有相当的学问的。

定性地说，越靠前的阶段，其效果的改善对点击率的贡献越大；而越靠后的阶段，其效果的改善对转化率的贡献越大。但是以上各个阶段的划分，绝非孤立的和绝对的，而某一项具体的广告策略或技术，也往往会对几个阶段的效果同时发生影响。虽然这样的有关广告有效性模型的讨论多见于传统广告的研究中，

\clearpage{\pagestyle{empty}} %\cleardoublepage

\end{CJK*}
